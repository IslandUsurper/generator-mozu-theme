language: objective-c
os:
- linux
- osx
sudo: false
env:
  matrix:
    - TRAVIS_NODE_VERSION="4.1"
    - TRAVIS_NODE_VERSION="4.2"
    - TRAVIS_NODE_VERSION="stable"
cache:
  directories:
    - node_modules
before_script:
- rm -rf ~/.nvm && git clone https://github.com/creationix/nvm.git ~/.nvm && (cd ~/.nvm && git checkout `git describe --abbrev=0 --tags`) && source ~/.nvm/nvm.sh && nvm install $TRAVIS_NODE_VERSION
- npm install
- git config --global user.email "travis-ci-build@volusion.com"
- git config --global user.name "Travis CI Build"
script:
- node --version
- npm --version
- if [ -n "TRAVIS_TAG" ]; then npm run ci-build-stable; else npm run ci-build; fi
deploy:
  provider: npm
  email: james_zetlen@volusion.com
  api_key:
    secure: SaWoT+efIXjFzk3muDAoRpu8drfx/kq6gnDcT/nneGYnimyIxFgKmceqvDKSdLlkAVsxsZQiLO7h3kxXzPxYycnj8PvvaKxXTjaUeY+UpWdb+fTGFEm5On52egs4g1FCjtSGtH27RtE/Dix4ODFHmZElINvWEkd+MqH9bvMv81/U58wa7xlViNhVXEKH3uaQmHqHIdYGLm8JJZF3VCkoS51sxW07SpeCEPlSfTLQr8inW9wP1i/nfYd17ZGd0jEmUjkoGiskPzgH6B1Jy2s1wz9Ws/GK2m4L6cXbV1EjKYnByxN92Ygt2oJ2dWkwjaYCjFQPixW9Ekl5th7uUopcJiDjyBkcnSHa9QE1YFwX42/qh+CZUjAVRNsSGzuKovrYsHcqDw8Q8p9IZgVOB0l4XJHxaBQhH3KSxLScPkOh0mUynHehepaBmBoWjyXk/pj7l2X92Su2hDa4QWgZfMsiCeEHZR2DK/viPA+BBrC6uySGn52WJfuDE7g0q0l32rkbK03MM+7kII73NoopwiHl3nHclMQ6xWYpWbwKaDjZetV5TvtWXVHStjPEB1E2MgAYGaXwU5q3GujMbPss4PRDVBOEUlz1m+5SRurLudp/GXqFSNT3d/kYeFzh6U2rOPSSJncW8y0/c0gxrZ2RnUrJLtbpJupPmz+csKTwlMdBTgo=
  skip_cleanup: true
  on:
    all_branches: true
    condition: $TRAVIS_NODE_VERSION = "stable" && $TRAVIS_OS_NAME = "linux" && -n "TRAVIS_TAG"
